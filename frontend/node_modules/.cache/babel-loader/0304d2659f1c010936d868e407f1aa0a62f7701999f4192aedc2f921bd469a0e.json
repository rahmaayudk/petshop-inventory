{"ast":null,"code":"import axios from 'axios';\nimport { ensureArray, ensureObject } from './apiHelpers';\nconst API_BASE_URL = 'http://localhost:8000';\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  withCredentials: true,\n  timeout: 10000\n});\n\n// Request interceptor\napi.interceptors.request.use(config => config, error => Promise.reject(error));\n\n// Response interceptor dengan enhanced handling\napi.interceptors.response.use(response => {\n  // Always ensure consistent data structure\n  const data = response.data;\n  if (Array.isArray(data)) {\n    return data;\n  }\n  if (data && typeof data === 'object') {\n    // Handle different response formats\n    if (data.success !== undefined) {\n      return data;\n    }\n    if (data.data !== undefined) {\n      return data.data;\n    }\n    if (data.message !== undefined) {\n      return data;\n    }\n  }\n  return data || {};\n}, error => {\n  var _error$response, _error$response2, _error$response2$data, _error$response3, _error$response4;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    window.location.href = '/login';\n  }\n  return Promise.reject({\n    message: ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Terjadi kesalahan pada server',\n    status: (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status,\n    data: (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data\n  });\n});\nexport const authAPI = {\n  login: (username, password) => api.post('/auth', {\n    action: 'login',\n    username,\n    password\n  }),\n  logout: () => api.post('/auth', {\n    action: 'logout'\n  }),\n  checkAuth: () => api.post('/auth', {\n    action: 'check'\n  })\n};\nexport const productAPI = {\n  getAll: () => api.get('/products').then(ensureArray),\n  getLowStock: () => api.get('/products?action=low_stock').then(ensureArray),\n  create: productData => api.post('/products', productData),\n  update: productData => api.put('/products', productData),\n  delete: id => api.delete('/products', {\n    data: {\n      id\n    }\n  })\n};\nexport const transactionAPI = {\n  create: transactionData => api.post('/transactions', transactionData),\n  getBestSellers: (limit = 5) => api.get(`/transactions?action=best_sellers&limit=${limit}`).then(ensureArray),\n  getSalesReport: (startDate, endDate) => api.get(`/transactions?action=sales_report&start_date=${startDate}&end_date=${endDate}`).then(ensureArray),\n  getRecentTransactions: (limit = 10) => api.get(`/transactions?action=recent&limit=${limit}`).then(ensureArray),\n  getMonthlyGrowth: () => api.get('/transactions?action=growth').then(ensureObject),\n  getProfitAnalysis: (startDate, endDate) => api.get(`/transactions?action=profit_analysis&start_date=${startDate}&end_date=${endDate}`).then(ensureArray)\n};\nexport const analyticsAPI = {\n  getCustomerInsights: () => api.get('/analytics/customer-insights').then(ensureObject),\n  getInventoryTurnover: () => api.get('/analytics/inventory-turnover').then(ensureArray),\n  getSalesTrends: (period = 'monthly') => api.get(`/analytics/sales-trends?period=${period}`).then(ensureArray)\n};\n\n// Helper function untuk handle API errors\nexport const handleApiError = error => {\n  console.error('API Error:', error);\n  return {\n    success: false,\n    message: error.message || 'Terjadi kesalahan',\n    data: null\n  };\n};\nexport default api;","map":{"version":3,"names":["axios","ensureArray","ensureObject","API_BASE_URL","api","create","baseURL","withCredentials","timeout","interceptors","request","use","config","error","Promise","reject","response","data","Array","isArray","success","undefined","message","_error$response","_error$response2","_error$response2$data","_error$response3","_error$response4","status","window","location","href","authAPI","login","username","password","post","action","logout","checkAuth","productAPI","getAll","get","then","getLowStock","productData","update","put","delete","id","transactionAPI","transactionData","getBestSellers","limit","getSalesReport","startDate","endDate","getRecentTransactions","getMonthlyGrowth","getProfitAnalysis","analyticsAPI","getCustomerInsights","getInventoryTurnover","getSalesTrends","period","handleApiError","console"],"sources":["C:/Users/ASUS/OneDrive/Dokumen/petshop-inventory/frontend/src/utils/api.js"],"sourcesContent":["import axios from 'axios';\r\nimport { ensureArray, ensureObject } from './apiHelpers';\r\n\r\nconst API_BASE_URL = 'http://localhost:8000';\r\n\r\nconst api = axios.create({\r\n    baseURL: API_BASE_URL,\r\n    withCredentials: true,\r\n    timeout: 10000,\r\n});\r\n\r\n// Request interceptor\r\napi.interceptors.request.use(\r\n    (config) => config,\r\n    (error) => Promise.reject(error)\r\n);\r\n\r\n// Response interceptor dengan enhanced handling\r\napi.interceptors.response.use(\r\n    (response) => {\r\n        // Always ensure consistent data structure\r\n        const data = response.data;\r\n        \r\n        if (Array.isArray(data)) {\r\n            return data;\r\n        }\r\n        \r\n        if (data && typeof data === 'object') {\r\n            // Handle different response formats\r\n            if (data.success !== undefined) {\r\n                return data;\r\n            }\r\n            if (data.data !== undefined) {\r\n                return data.data;\r\n            }\r\n            if (data.message !== undefined) {\r\n                return data;\r\n            }\r\n        }\r\n        \r\n        return data || {};\r\n    },\r\n    (error) => {\r\n        if (error.response?.status === 401) {\r\n            window.location.href = '/login';\r\n        }\r\n        \r\n        return Promise.reject({\r\n            message: error.response?.data?.message || 'Terjadi kesalahan pada server',\r\n            status: error.response?.status,\r\n            data: error.response?.data\r\n        });\r\n    }\r\n);\r\n\r\nexport const authAPI = {\r\n    login: (username, password) => \r\n        api.post('/auth', { action: 'login', username, password }),\r\n    \r\n    logout: () => \r\n        api.post('/auth', { action: 'logout' }),\r\n    \r\n    checkAuth: () => \r\n        api.post('/auth', { action: 'check' })\r\n};\r\n\r\nexport const productAPI = {\r\n    getAll: () => api.get('/products').then(ensureArray),\r\n    getLowStock: () => api.get('/products?action=low_stock').then(ensureArray),\r\n    create: (productData) => api.post('/products', productData),\r\n    update: (productData) => api.put('/products', productData),\r\n    delete: (id) => api.delete('/products', { data: { id } })\r\n};\r\n\r\nexport const transactionAPI = {\r\n    create: (transactionData) => api.post('/transactions', transactionData),\r\n    getBestSellers: (limit = 5) => \r\n        api.get(`/transactions?action=best_sellers&limit=${limit}`).then(ensureArray),\r\n    getSalesReport: (startDate, endDate) =>\r\n        api.get(`/transactions?action=sales_report&start_date=${startDate}&end_date=${endDate}`).then(ensureArray),\r\n    getRecentTransactions: (limit = 10) =>\r\n        api.get(`/transactions?action=recent&limit=${limit}`).then(ensureArray),\r\n    getMonthlyGrowth: () =>\r\n        api.get('/transactions?action=growth').then(ensureObject),\r\n    getProfitAnalysis: (startDate, endDate) =>\r\n        api.get(`/transactions?action=profit_analysis&start_date=${startDate}&end_date=${endDate}`).then(ensureArray)\r\n};\r\n\r\nexport const analyticsAPI = {\r\n    getCustomerInsights: () =>\r\n        api.get('/analytics/customer-insights').then(ensureObject),\r\n    getInventoryTurnover: () =>\r\n        api.get('/analytics/inventory-turnover').then(ensureArray),\r\n    getSalesTrends: (period = 'monthly') =>\r\n        api.get(`/analytics/sales-trends?period=${period}`).then(ensureArray)\r\n};\r\n\r\n// Helper function untuk handle API errors\r\nexport const handleApiError = (error) => {\r\n    console.error('API Error:', error);\r\n    return {\r\n        success: false,\r\n        message: error.message || 'Terjadi kesalahan',\r\n        data: null\r\n    };\r\n};\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}