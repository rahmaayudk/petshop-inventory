{"ast":null,"code":"export const ensureArray = data => {\n  if (Array.isArray(data)) {\n    return data;\n  }\n  if (data && typeof data === 'object') {\n    // Handle berbagai format response\n    if (data.data && Array.isArray(data.data)) {\n      return data.data;\n    }\n    if (data.products && Array.isArray(data.products)) {\n      return data.products;\n    }\n    if (data.items && Array.isArray(data.items)) {\n      return data.items;\n    }\n    if (data.transactions && Array.isArray(data.transactions)) {\n      return data.transactions;\n    }\n    // Jika object memiliki properties yang mirip array\n    const values = Object.values(data);\n    if (values.length > 0 && Array.isArray(values[0])) {\n      return values[0];\n    }\n  }\n\n  // Return empty array sebagai fallback\n  console.warn('Data is not an array, returning empty array:', data);\n  return [];\n};\nexport const ensureObject = data => {\n  if (data && typeof data === 'object' && !Array.isArray(data)) {\n    return data;\n  }\n\n  // Return empty object sebagai fallback\n  console.warn('Data is not an object, returning empty object:', data);\n  return {};\n};\nexport const safeReduce = (array, reducer, initialValue = 0) => {\n  if (!Array.isArray(array)) {\n    console.warn('safeReduce: Input is not an array');\n    return initialValue;\n  }\n  try {\n    return array.reduce(reducer, initialValue);\n  } catch (error) {\n    console.error('Reduce error:', error);\n    return initialValue;\n  }\n};\n\n// Helper untuk extract data dari response yang complex\nexport const extractData = (response, key = null) => {\n  if (!response) return key ? null : [];\n  if (key && response[key] !== undefined) {\n    return response[key];\n  }\n  return response;\n};\n\n// Helper untuk handle API errors dengan retry logic\nexport const withRetry = async (apiCall, maxRetries = 3) => {\n  for (let i = 0; i < maxRetries; i++) {\n    try {\n      return await apiCall();\n    } catch (error) {\n      if (i === maxRetries - 1) throw error;\n      // Wait before retry (exponential backoff)\n      await new Promise(resolve => setTimeout(resolve, 1000 * Math.pow(2, i)));\n    }\n  }\n};","map":{"version":3,"names":["ensureArray","data","Array","isArray","products","items","transactions","values","Object","length","console","warn","ensureObject","safeReduce","array","reducer","initialValue","reduce","error","extractData","response","key","undefined","withRetry","apiCall","maxRetries","i","Promise","resolve","setTimeout","Math","pow"],"sources":["C:/xampp/htdocs/petshop-inventory/frontend/src/utils/apiHelpers.js"],"sourcesContent":["export const ensureArray = (data) => {\n    if (Array.isArray(data)) {\n        return data;\n    }\n    \n    if (data && typeof data === 'object') {\n        // Handle berbagai format response\n        if (data.data && Array.isArray(data.data)) {\n            return data.data;\n        }\n        if (data.products && Array.isArray(data.products)) {\n            return data.products;\n        }\n        if (data.items && Array.isArray(data.items)) {\n            return data.items;\n        }\n        if (data.transactions && Array.isArray(data.transactions)) {\n            return data.transactions;\n        }\n        // Jika object memiliki properties yang mirip array\n        const values = Object.values(data);\n        if (values.length > 0 && Array.isArray(values[0])) {\n            return values[0];\n        }\n    }\n    \n    // Return empty array sebagai fallback\n    console.warn('Data is not an array, returning empty array:', data);\n    return [];\n};\n\nexport const ensureObject = (data) => {\n    if (data && typeof data === 'object' && !Array.isArray(data)) {\n        return data;\n    }\n    \n    // Return empty object sebagai fallback\n    console.warn('Data is not an object, returning empty object:', data);\n    return {};\n};\n\nexport const safeReduce = (array, reducer, initialValue = 0) => {\n    if (!Array.isArray(array)) {\n        console.warn('safeReduce: Input is not an array');\n        return initialValue;\n    }\n    \n    try {\n        return array.reduce(reducer, initialValue);\n    } catch (error) {\n        console.error('Reduce error:', error);\n        return initialValue;\n    }\n};\n\n// Helper untuk extract data dari response yang complex\nexport const extractData = (response, key = null) => {\n    if (!response) return key ? null : [];\n    \n    if (key && response[key] !== undefined) {\n        return response[key];\n    }\n    \n    return response;\n};\n\n// Helper untuk handle API errors dengan retry logic\nexport const withRetry = async (apiCall, maxRetries = 3) => {\n    for (let i = 0; i < maxRetries; i++) {\n        try {\n            return await apiCall();\n        } catch (error) {\n            if (i === maxRetries - 1) throw error;\n            // Wait before retry (exponential backoff)\n            await new Promise(resolve => setTimeout(resolve, 1000 * Math.pow(2, i)));\n        }\n    }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}